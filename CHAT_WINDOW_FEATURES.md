# 悬浮聊天窗口功能说明

## 功能概述

我们成功将原本固定在左侧的聊天窗口改造为可悬浮或停靠的码头框，具有以下特性：

## 主要功能

### 1. 悬浮模式
- 聊天窗口可以作为悬浮窗口在屏幕上自由移动
- 支持拖拽功能，可以将窗口拖拽到任意位置
- 默认显示在右下角，不会遮挡主要内容

### 2. 停靠模式
- **停靠左侧**：窗口停靠在屏幕左侧，占据全高度
- **停靠右侧**：窗口停靠在屏幕右侧，占据全高度  
- **停靠底部**：窗口停靠在屏幕底部，占据全宽度
- **悬浮模式**：窗口可以自由移动

### 3. 最小化功能
- 点击最小化按钮可以将聊天窗口收缩为一个圆形图标
- 点击图标可以重新展开聊天窗口
- 最小化状态下仍可拖拽移动位置

### 4. 状态保持
- 聊天历史记录保存在localStorage中，页面刷新不会丢失
- 窗口位置、停靠状态、最小化状态都会自动保存
- 页面切换时聊天窗口状态保持不变

### 5. 交互优化
- **发送按钮**：正常状态显示"发送"，发送中显示"发送中"和加载动画
- **快捷键**：Ctrl+Shift+C 可以快速切换聊天窗口的显示/隐藏
- **拖拽优化**：防止点击时意外触发拖拽，只有在移动一定距离后才开始拖拽

### 6. 样式优化
- 现代化的渐变背景和阴影效果
- 不同停靠位置有相应的圆角和阴影调整
- 响应式设计，适配不同屏幕尺寸

## 技术实现

### 组件结构
- `FloatingChatWindow.vue` - 主要的悬浮聊天窗口组件
- `ChatWindow/index.vue` - 原有的聊天内容组件
- 组件放置在 `App.vue` 中，确保全局可用且不受路由切换影响

### 状态管理
- 使用 Vue 3 的 Composition API
- 本地存储保存用户偏好设置
- 响应式状态管理确保UI实时更新

### 样式特性
- 使用 CSS 变量和计算属性实现动态样式
- 平滑的过渡动画效果
- 现代化的视觉设计

## 使用方法

1. **展开/收起**：点击聊天图标或使用快捷键 Ctrl+Shift+C
2. **移动位置**：拖拽聊天窗口头部或图标
3. **切换停靠模式**：点击设置按钮选择停靠位置
4. **发送消息**：在输入框中输入内容，点击发送按钮或按回车键

## 浏览器兼容性

- 支持现代浏览器（Chrome、Firefox、Safari、Edge）
- 使用标准的Web API，无需额外的polyfill

## 未来扩展

可以考虑添加的功能：
- 聊天窗口大小调整
- 多个聊天会话支持
- 更多的主题和样式选项
- 语音消息支持
- 文件传输功能
